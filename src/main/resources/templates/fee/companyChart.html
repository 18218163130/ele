<!DOCTYPE html>
<html lang="en" style="height: 100%" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}"media="all" />
    <link rel="stylesheet" th:href="@{/css/public.css}" media="all" />
</head>
<body style="height: 100%;">


<div style="padding: 20px; background-color: #F2F2F2;height: 100%;">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header" style="text-align: center;display: none">
                    <form class="layui-form" lay-filter="searchForm2" id="searchForm2">
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <div class="layui-input-inline">
                                    <input type="text" class="layui-input" name="year" id="year2" readonly="readonly" placeholder="yyyy">
                                </div>
                                <div class="layui-input-inline">
                                    <button  type="button" class="layui-btn layui-btn-normal layui-btn-sm layui-icon layui-icon-release"
                                            lay-filter="doSubmit2" id="doSubmit2" lay-submit="">查询
                                    </button>

                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="layui-card-body">
                    <div id="right" class="layui-card-body" style="width: 100%;height:600px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" th:src="@{/layui/layui.js}" ></script>
<!--<script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}" ></script>-->
<script type="text/javascript" th:src="@{/js/echarts.min.js}"></script>
<script type="text/javascript" th:inline="javascript">

    layui.use(['laydate','jquery','form'], function () {
        var laydate = layui.laydate;
        var $ = layui.jquery;
        var form = layui.form;

        laydate.render({
            elem:"#year2",
            type:'month',
            value:new Date()
        })

        // 提交分析
        form.on("submit(doSubmit2)",function (obj) {
            var year = $("#year2").val();
            analyRight(year);
        });


        $("#doSubmit2").click(); // 默认点击查询按钮

        function analyRight(year){
            $.get("/fee/analyFeeYM",{year:year},function(data){
                var myRightChart = echarts.init(document.getElementById("right"));
                option = {
                    title : {
                        subtext: '公司历史营销数据'
                    },
                    tooltip : {
                        trigger: 'axis'
                    },
                    legend: {
                        data:['营销额']
                    },

                    xAxis : [
                        {
                            type : 'category',
                            // data : ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月']
                            data:data.monthsName
                        }
                    ],
                    yAxis : [
                        {
                            type : 'value'
                        }
                    ],
                    series : [
                        {
                            name:'营销额',
                            type:'bar',
                            // data:[2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3],
                            data:data.totalsValue,
                            markPoint : {
                            }
                        }
                    ]
                };
                myRightChart.setOption(option);
            });
        }

    });

</script>
</body>
</html>